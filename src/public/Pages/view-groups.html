<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Group View</title>
<link rel="stylesheet" href="../Styling/view-groups.css">
  <link rel="stylesheet" href="../Styling/sidebar.css">
  <script src="../JavaScript/components.js"></script>
  <script src="../JavaScript/groups.js"></script>
</head>
<body>
  <div class="sidebar-padded">
    <div class="search-group">
      <input type="text" class="search-group__bar" placeholder="Search">
    </div>
    <div class="list">
            <!-- Groups will be dynamically inserted here -->
    </div>
    <div class="popular-list">
      <!-- Populars will be dynamically inserted here -->
    </div>
  </div>

  <script>
    createSidebar(3);

    [|groups|]
    [|populars|]

    const groupList = document.getElementsByClassName("list")[0];
    const popularList =  document.getElementsByClassName("popular-list")[0];

    groupLists.forEach(x => groupList.innerHTML += x);
    popularLists.forEach(x => groupList.innerHTML += x);

    function getToken() {
            return localStorage.getItem('jwtToken');
        }

    function fetchData(url) {
            fetch(url, {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + getToken(),
                    'Content-Type': 'application/json'
                }
            }).then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            }).then(data => {
                console.log('Data fetched successfully:', data);
            }).catch(error => {
                console.error('Error fetching data:', error);
            });
        }
        
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('groups__list__item__info__view__text')) {
                const url = event.target.parentElement.getAttribute('href');
                fetchData(url);
            }
        })

    </script>
</body>
</html> 
