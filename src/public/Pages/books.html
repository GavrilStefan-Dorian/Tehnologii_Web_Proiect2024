<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Boo - Book Reviewer</title>
    <link rel="stylesheet" href="../Styling/books.css">
    <link rel="stylesheet" href="../Styling/sidebar.css">
    <script src="../JavaScript/components.js"></script>
    <script src="../JavaScript/books.js"></script>
    <script src="../../scripts/auth.js"></script>
</head>
<body>
    <div class="sidebar-padded">
        <div class="list">
            <!-- Books will be dynamically inserted here -->
        </div>
    </div>

    <script>
        createSidebar(1);

        const books = [
            createBook("Atomic Habits", "James Clear", "../Resources/Images/Book.png", "4.08", "123,493"),
            createBook("Atomic Habits", "James Clear", "../Resources/Images/Book.png", "4.08", "123,493"),
            createBook("Atomic Habits", "James Clear", "../Resources/Images/Book.png", "4.08", "123,493"),
            createBook("Atomic Habits", "James Clear", "../Resources/Images/Book.png", "4.08", "123,493"),
        ];

        const bookLists = [
            createBookList("To Read", books),
            createBookList("Reading", books),
            createBookList("Finished", books)
        ];

        const bookList = document.getElementsByClassName("list")[0];
        bookLists.forEach(x => bookList.innerHTML += x);

        // Function to retrieve JWT token from localStorage
        function getToken() {
            return localStorage.getItem('jwtToken');
        }

        // Function to fetch data with JWT token included in headers
        function fetchData(url) {
            fetch(url, {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + getToken(),
                    'Content-Type': 'application/json'
                    // Add other headers as needed
                }
            }).then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json(); // Assuming response is JSON
            }).then(data => {
                console.log('Data fetched successfully:', data);
                // Handle data as needed
            }).catch(error => {
                console.error('Error fetching data:', error);
            });
        }

        // Example usage: Fetch data when a book is clicked (replace with actual URL)
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('books__list__item__info__view__text')) {
                const url = event.target.parentElement.getAttribute('href');
                fetchData(url);
            }
        });
    </script>
</body>
</html>
